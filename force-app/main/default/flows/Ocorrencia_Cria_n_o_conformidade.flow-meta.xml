<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>64.0</apiVersion>
    <environments>Default</environments>
    <interviewLabel>Ocorrencia — Cria não conformidade {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Ocorrencia — Cria ação corretiva</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <description>RecordType Ocorrencia: 012U4000008K7YbIAK</description>
        <name>Cria_Acao_corretiva</name>
        <label>Cria Ação corretiva</label>
        <locationX>0</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>att_status</targetReference>
        </connector>
        <inputAssignments>
            <field>Causas__c</field>
            <value>
                <elementReference>$Record.Possiveis_causas__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Data_da_abertura_do_RCA__c</field>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Descri_o_da_Ocorr_ncia__c</field>
            <value>
                <elementReference>$Record.Descri_o_Detalhada_da_Ocorr_ncia__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Entregue_por__c</field>
            <value>
                <elementReference>$User.ContactId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ocorrencia__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Origem__c</field>
            <value>
                <stringValue>OCORRÊNCIA</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <stringValue>012U4000008K7YbIAK</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Responsevel__c</field>
            <value>
                <elementReference>$Record.Responsavel_pela_ocorrencia__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Resumo_da_Ocorr_ncia__c</field>
            <value>
                <elementReference>resumo</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Setor__c</field>
            <value>
                <elementReference>$Record.Departamento__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Pendente</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Sugest_o_para_Resolu_o__c</field>
            <value>
                <elementReference>$Record.Sugest_o_para_Resolu_o__c</elementReference>
            </value>
        </inputAssignments>
        <object>Acao_corretiva__c</object>
    </recordCreates>
    <recordUpdates>
        <name>att_status</name>
        <label>att status</label>
        <locationX>0</locationX>
        <locationY>0</locationY>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Em Tratamento</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>0</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Cria_Acao_corretiva</targetReference>
        </connector>
        <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Criar_acao_Corretiva__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>Ocorrencia__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>resumo</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>&lt;h2 style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;color: rgb(1, 8, 118);&quot;&gt;Resumo da Ocorrência&lt;/span&gt;&lt;/h2&gt;&lt;table class=&quot;ql-table-blob&quot; style=&quot;width: 100%; border-collapse: collapse; margin-bottom: 20px; white-space: pre;&quot;&gt;    &lt;tbody style=&quot;white-space: pre;&quot;&gt;        &lt;tr style=&quot;white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; width: 30%; font-weight: bold;&quot;&gt;Ocorrência:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Name}&lt;/td&gt;        &lt;/tr&gt;        &lt;tr style=&quot;background-color: rgb(249, 249, 249); white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; font-weight: bold;&quot;&gt;Departamento:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Departamento__c}&lt;/td&gt;        &lt;/tr&gt;        &lt;tr style=&quot;white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; font-weight: bold; vertical-align: top;&quot;&gt;Descrição:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Descri_o_Detalhada_da_Ocorr_ncia__c}&lt;/td&gt;        &lt;/tr&gt;        &lt;tr style=&quot;background-color: rgb(249, 249, 249); white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; font-weight: bold;&quot;&gt;Possíveis causas:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Possiveis_causas__c}&lt;/td&gt;        &lt;/tr&gt;        &lt;tr style=&quot;white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; font-weight: bold;&quot;&gt;Sugestão para resolução:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Sugest_o_para_Resolu_o__c}&lt;/td&gt;        &lt;/tr&gt;        &lt;tr style=&quot;background-color: rgb(249, 249, 249); white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; font-weight: bold;&quot;&gt;Responsável:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Responsavel_pela_ocorrencia__r.FirstName} {!$Record.Responsavel_pela_ocorrencia__r.LastName}&lt;/td&gt;        &lt;/tr&gt;        &lt;tr style=&quot;white-space: pre;&quot;&gt;            &lt;td style=&quot;padding: 6px 10px; font-weight: bold;&quot;&gt;Observações:&lt;/td&gt;            &lt;td style=&quot;padding: 6px 10px;&quot;&gt;{!$Record.Observacoes__c}&lt;/td&gt;        &lt;/tr&gt;    &lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;em style=&quot;font-size: 11px;&quot;&gt;Criado por&lt;/em&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt; &lt;/span&gt;&lt;strong style=&quot;font-size: 11px;&quot;&gt;{!$Record.CreatedBy.FirstName} {!$Record.CreatedBy.LastName} &lt;/strong&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;/span&gt;&lt;em style=&quot;font-size: 11px;&quot;&gt;em&lt;/em&gt;            &lt;span style=&quot;font-size: 11px;&quot;&gt; &lt;/span&gt;&lt;strong
        style=&quot;font-size: 11px;&quot;&gt;{!$Record.datahora_abertura__c}&lt;/strong&gt;&lt;/p&gt;</text>
    </textTemplates>
</Flow>
