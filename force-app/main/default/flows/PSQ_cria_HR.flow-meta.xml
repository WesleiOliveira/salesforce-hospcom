<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>60.0</apiVersion>
    <assignments>
        <name>Atribui_o_1</name>
        <label>Atribuição 1</label>
        <locationX>50</locationX>
        <locationY>1139</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_1var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>item2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_3</name>
        <label>Atribuição  3</label>
        <locationX>50</locationX>
        <locationY>1739</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_3var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>item4</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_4</name>
        <label>Atribuição  4</label>
        <locationX>50</locationX>
        <locationY>2039</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_4var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Item5</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_5</name>
        <label>Atribuição 5</label>
        <locationX>50</locationX>
        <locationY>2339</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_5var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Item6</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_6</name>
        <label>Atribuição  6</label>
        <locationX>50</locationX>
        <locationY>2639</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_6var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Item7</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_7</name>
        <label>Atribuição  7</label>
        <locationX>50</locationX>
        <locationY>2939</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_7var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Item8</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_8</name>
        <label>Atribuição  8</label>
        <locationX>50</locationX>
        <locationY>3239</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_8var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Item9</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribui_o_9</name>
        <label>Atribuição  9</label>
        <locationX>50</locationX>
        <locationY>3539</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_9var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Criar_registros_2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Atribuicao_2</name>
        <label>Atribuição  2</label>
        <locationX>50</locationX>
        <locationY>1439</locationY>
        <assignmentItems>
            <assignToReference>Itens</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>item_2var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>item3</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>encontrou</name>
        <label>encontrou</label>
        <locationX>182</locationX>
        <locationY>539</locationY>
        <defaultConnector>
            <targetReference>Verifica_itens_alterados</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>Resultado_1_de_encontrou</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_novos_HR</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_1</targetReference>
            </connector>
            <label>Resultado 1 de encontrou</label>
        </rules>
    </decisions>
    <decisions>
        <name>item2</name>
        <label>item 2</label>
        <locationX>182</locationX>
        <locationY>1331</locationY>
        <defaultConnector>
            <targetReference>item3</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Aplicao__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Aplicao__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribuicao_2</targetReference>
            </connector>
            <label>item 2</label>
        </rules>
    </decisions>
    <decisions>
        <name>item3</name>
        <label>item 3</label>
        <locationX>182</locationX>
        <locationY>1631</locationY>
        <defaultConnector>
            <targetReference>item4</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Defini_es__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Defini_es__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_3</targetReference>
            </connector>
            <label>item 3</label>
        </rules>
    </decisions>
    <decisions>
        <name>item4</name>
        <label>item 4</label>
        <locationX>182</locationX>
        <locationY>1931</locationY>
        <defaultConnector>
            <targetReference>Item5</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_4</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Equipamentos_e_Softwares__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Equipamentos_e_Softwares__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_4</targetReference>
            </connector>
            <label>item 4</label>
        </rules>
    </decisions>
    <decisions>
        <name>Item5</name>
        <label>Item 5</label>
        <locationX>182</locationX>
        <locationY>2231</locationY>
        <defaultConnector>
            <targetReference>Item6</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_5</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Condi_es_Gerais__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Condi_es_Gerais__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_5</targetReference>
            </connector>
            <label>item 5</label>
        </rules>
    </decisions>
    <decisions>
        <name>Item6</name>
        <label>Item 6</label>
        <locationX>182</locationX>
        <locationY>2531</locationY>
        <defaultConnector>
            <targetReference>Item7</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_6</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Responsabilidade_e_Autoridade__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Responsabilidade_e_Autoridade__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_6</targetReference>
            </connector>
            <label>item 6</label>
        </rules>
    </decisions>
    <decisions>
        <name>Item7</name>
        <label>Item 7</label>
        <locationX>182</locationX>
        <locationY>2831</locationY>
        <defaultConnector>
            <targetReference>Item8</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>Item_7</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Refer_ncia__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Refer_ncia__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_7</targetReference>
            </connector>
            <label>Item 7</label>
        </rules>
    </decisions>
    <decisions>
        <name>Item8</name>
        <label>Item 8</label>
        <locationX>182</locationX>
        <locationY>3131</locationY>
        <defaultConnector>
            <targetReference>Item9</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_8</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Formul_rios_Anexos_e_Documentos__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Formul_rios_Anexos_e_Documentos__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_8</targetReference>
            </connector>
            <label>Item 8</label>
        </rules>
    </decisions>
    <decisions>
        <name>Item9</name>
        <label>Item_9</label>
        <locationX>182</locationX>
        <locationY>3431</locationY>
        <defaultConnector>
            <targetReference>Criar_registros_2</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>Item_9</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Registros__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Registros__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_9</targetReference>
            </connector>
            <label>Item 9</label>
        </rules>
    </decisions>
    <decisions>
        <name>Verifica_itens_alterados</name>
        <label>Verifica itens alterados</label>
        <locationX>182</locationX>
        <locationY>1031</locationY>
        <defaultConnector>
            <targetReference>item2</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Resultado padrão</defaultConnectorLabel>
        <rules>
            <name>item_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>busca_PSQ_antigo.Objetivo__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Objetivo__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Atribui_o_1</targetReference>
            </connector>
            <label>item 1</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>data</name>
        <dataType>Date</dataType>
        <expression>Today()</expression>
    </formulas>
    <formulas>
        <name>item_1var</name>
        <dataType>String</dataType>
        <expression>&quot;1&quot;</expression>
    </formulas>
    <formulas>
        <name>item_2var</name>
        <dataType>String</dataType>
        <expression>&quot;1&quot;</expression>
    </formulas>
    <formulas>
        <name>item_3var</name>
        <dataType>String</dataType>
        <expression>&quot;3&quot;</expression>
    </formulas>
    <formulas>
        <name>item_4var</name>
        <dataType>String</dataType>
        <expression>&quot;4&quot;</expression>
    </formulas>
    <formulas>
        <name>item_5var</name>
        <dataType>String</dataType>
        <expression>&quot;5&quot;</expression>
    </formulas>
    <formulas>
        <name>item_6var</name>
        <dataType>String</dataType>
        <expression>&quot;6&quot;</expression>
    </formulas>
    <formulas>
        <name>item_7var</name>
        <dataType>String</dataType>
        <expression>&quot;7&quot;</expression>
    </formulas>
    <formulas>
        <name>item_8var</name>
        <dataType>String</dataType>
        <expression>&quot;8&quot;</expression>
    </formulas>
    <formulas>
        <name>item_9var</name>
        <dataType>String</dataType>
        <expression>&quot;9&quot;</expression>
    </formulas>
    <formulas>
        <name>itensFORM</name>
        <dataType>String</dataType>
        <expression>MID({!Itens}, 2, LEN({!Itens}) - 2)</expression>
    </formulas>
    <interviewLabel>PSQ - cria HR {!$Flow.CurrentDateTime}</interviewLabel>
    <label>PSQ - cria HR</label>
    <loops>
        <name>Loop_1</name>
        <label>Loop 1</label>
        <locationX>74</locationX>
        <locationY>647</locationY>
        <collectionReference>busca_novos_HR</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Criar_registros_1</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Verifica_itens_alterados</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Criar_registros_1</name>
        <label>Criar registros 1</label>
        <locationX>162</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>Loop_1</targetReference>
        </connector>
        <inputAssignments>
            <field>Data__c</field>
            <value>
                <elementReference>Loop_1.Data__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Item__c</field>
            <value>
                <elementReference>Loop_1.Item__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Natureza_da_Alteracao__c</field>
            <value>
                <elementReference>Loop_1.Natureza_da_Alteracao__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Procedimento_do_Sistema_de_Qualidade__c</field>
            <value>
                <elementReference>busca_PSQ_antigo.Id</elementReference>
            </value>
        </inputAssignments>
        <object>HISTORICO_DE_REVISAO__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Criar_registros_2</name>
        <label>Criar registros 2</label>
        <locationX>182</locationX>
        <locationY>3731</locationY>
        <inputAssignments>
            <field>Data__c</field>
            <value>
                <elementReference>data</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Item__c</field>
            <value>
                <elementReference>itensFORM</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>$Record.Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Natureza_da_Alteracao__c</field>
            <value>
                <elementReference>$Record.Natureza_da_Altera_o__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Procedimento_do_Sistema_de_Qualidade__c</field>
            <value>
                <elementReference>busca_PSQ_antigo.Id</elementReference>
            </value>
        </inputAssignments>
        <object>HISTORICO_DE_REVISAO__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>busca_novos_HR</name>
        <label>busca_novos_HR</label>
        <locationX>182</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>encontrou</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Procedimento_do_Sistema_de_Qualidade__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>busca_PSQ_antigo.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>HISTORICO_DE_REVISAO__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>busca_PSQ_antigo</name>
        <label>busca PSQ antigo</label>
        <locationX>182</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>busca_novos_HR</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record__Prior.Procedimento_do_Sistema_de_Qualidade__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PSQ__c</object>
        <sortField>Data_da_Ultima_Revis_o__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>56</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>busca_PSQ_antigo</targetReference>
        </connector>
        <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Em vigência</stringValue>
            </value>
        </filters>
        <object>PSQ__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>Itens</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
