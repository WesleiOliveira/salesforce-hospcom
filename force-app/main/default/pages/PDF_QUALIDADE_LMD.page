<apex:page standardController="L_M_D__c" applyHtmlTag="false" showHeader="false" renderAs="pdf">
    <head>
        <style type="text/css" media="print">
            @page {
                size: 21cm 29.7cm;
                margin: 100px 40px 60px 40px;

                @top-center {
                    content: element(header);
                }

                @bottom-center {
                    content: element(footer);
                }
            }

            @page {
                size: A4;
                background: url({!IF(L_M_D__c.Conta_Relacionada__r.CNPJ__c  == '27.476.124/0001-02',$Resource.TimbradoHealth,IF(L_M_D__c.Conta_Relacionada__r.CNPJ__c == '05.743.288/0001-08' || L_M_D__c.Conta_Relacionada__r.CNPJ__c == '05.743.288/0003-70',$Resource.TimbradoHospcom,IF(L_M_D__c.Conta_Relacionada__r.CNPJ__c == '23.813.386/0001-56',$Resource.TimbradoGDB,IF(L_M_D__c.Conta_Relacionada__r.CNPJ__c == '40.014.621/0001-49',$Resource.TimbradoABC,$Resource.TimbradoGenerico))))
            });
            margin:150px 50px 120px 50px;

            @bottom-center {
                content: element(footer);
            }
            }

            .pagenumber:before {
                content: counter(page);
            }

            .pagecount:before {
                content: counter(pages);
            }

            div.header {
                margin: 0px 0px 0px 0px;
                padding: 20px 0px 20px 0px;
                position: running(header);
                height: 60px;
            }

            div.content {}

            div.footer {
                margin: 0px 0px 0px 0px;
                padding: 20px 0px 20px 0px;
                position: running(footer);
                height: 20px;
                text-align: right;
                font-family: arial, verdana, sans-serif;
                font-size: 10px;
                font-weight: normal;
            }
        </style>
        <style type="text/css" media="print">
            /*
        @page:first{
            size:A4;
            background: url($Resource.SobreHealth);
            margin:150px 50px 120px 50px;
            @bottom-center{content:element(footer);
            }
        }
        
        @page{
            size:A4;
            background: url($Resource.TimbradoHealth);
            margin:150px 50px 120px 50px;
            @bottom-center{content:element(footer);}
        }
*/
            td,
            tr {
                padding: 0;
                margin: 0;
            }

            * {
                font-family: Arial, Helvetica, sans-serif;
                color: #0c3557;
            }

            .titulo {
                font-family: arial, verdana, sans-serif;
                font-size: 15px;
                text-align: left;
                font-weight: bold;
                width: 100%;
            }

            .tabela_geral {
                border-collapse: collapse;
                width: 100%;
            }

            table.print-friendly tr td,
            table.print-friendly tr th {
                page-break-inside: always;
            }

            .titulo {

                text-align: left;
                padding: 5px 1px;
                margin-top: 20px;



            }

            .maiuscula {
                text-transform: uppercase;
            }

            .questoes {}

            .questao {
                display: flex;
                flex-direction: row;
                padding: 5px;
                font-weight: 700;
            }

            .valor {
                margin-bottom: -100px;
                border: #0c3557 1px solid;

            }

            .sessao-questao {
                font-size: 14px;
                padding: 50px 0 0 0px;


            }


            .questao,
            p {
                padding: 0px !important;
                margin: 0;
                padding-right: 15px !important;
                font-size: 12px !important;
            }

            h1,
            h2 {
                padding: 10px 0;
                margin: 0;
                font-size: 14px !important;
            }

            .resposta {

                font-weight: 500;
                font-size: 14px;
                padding-left: 5px;
            }

            .t {
                text-align: center;
                padding: 1px 1px;
                font-size: 14px;
            }

            span {
                font-size: 12px !important;
            }

            .container_ass {
                bottom: 0;
            }


            .body {
                height: 100%;

            }

            .corpo-do-doc {
                display: flex;
                justify-content: space-between;
                height: 100%;
            }
            @page{
                position: relative;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .content222{
            
                page-break-before: always;
            }
            .footer2{
                /*background:#000;
                position:fixed;
                bottom:0;*/
            }
            .sessao-questao22{
                width: 400px !important;
                padding: 5px 0 ;
            }
            
            
        </style>
    </head>
            
        <body class="body">
    <apex:pageBlock >

            <div class="footer" style="text-align:center !important"><br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                Página <span class="pagenumber"></span> de <span class="pagecount"></span> - Emissão em:&nbsp;
                <apex:outputText value="{0,date,dd/MM/yyyy}">
                    <apex:param value="{! TODAY() }" />
                </apex:outputText>
            </div>

            
                        <table style="">

                            <tr>
                                <td colspan="4" style="text-align: center; padding:20px;">
                                    <h1 style="text-align: center;" class="">Procedimento do Sistema de Qualidade </h1>
                                    <h1 style="text-align: center;" class="top"> {!L_M_D__c.T_tulo_do_Documento__c   } - {!L_M_D__c.C_digo_do_Documento__c}</h1>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="1" class="sessao-questao2" style="text-align: center;">
                                    <p class="">
                                        <span class="questao" style="text-align: center;">
                                            Revisão
                                        </span>
                                    </p>
                                </td>
                                <td colspan="1" class="sessao-questao2" style="text-align: center;">
                                    <p class="">
                                        <span class="questao" style="text-align: center;">
                                            item
                                        </span>
                                    </p>
                                </td>
                                <td colspan="" class="sessao-questao22" style="text-align: center;">
                                    <p class="" style="width:400px">
                                        <span class="questao" style="text-align: center;">
                                            Natureza da Alteração
                                        </span>
                                    </p>
                                </td>

                                <td colspan="1" class="sessao-questao2" style="text-align: center;">
                                    <p class="">
                                        <span class="questao" style="text-align: center;">
                                            Data
                                        </span>
                                    </p>
                                </td>

                            </tr>
                            
                            <apex:variable var="cont" value="{!1}"/> <!-- Inicializa o contador -->

<apex:repeat value="{!L_M_D__c.Hist_ricos_de_Revis_o__r}" var="hr" id="theRepeat">
    <tr>
        <!-- Aqui começa a primeira coluna -->
        <td colspan="1" class="sessao-questao2" style="text-align: center;">
            <p class="" style="text-align: center;">
                <span class="resposta" style="text-align: center;">
                    <apex:outputText value="{0,number,000}">
                        <apex:param value="{!cont}" />
                    </apex:outputText> <!-- Mostra o valor do contador formatado -->
                </span>
            </p>
        </td>
        <!-- Aqui termina a primeira coluna -->

        <!-- Aqui começa a segunda coluna -->
        <td colspan="1" class="sessao-questao22" style="text-align: center;">
            <p class="" style="text-align: center;">
                <span class="resposta" style="text-align: center;">
                    <apex:outputText >{!hr.Item__c}</apex:outputText>
                </span>
            </p>
        </td>
        <!-- Aqui termina a segunda coluna -->

        <!-- Aqui começa a terceira coluna -->
        <td colspan="" class="sessao-questao2">
            <p class="" style="text-align: center;">
                <span class="resposta" style="text-align: left; width:400px">
                    <apex:outputText >{!hr.Natureza_da_Alteracao__c}</apex:outputText>
                </span>
            </p>
        </td>
        <!-- Aqui termina a terceira coluna -->

        <!-- Aqui começa a quarta coluna -->
        <td colspan="1" class="sessao-questao2" style="text-align: center;">
            <p class="" style="text-align: center;">
                <span class="resposta" style="text-align: center;">
                    <apex:outputText >
                        <apex:outputText value="{0,date,dd/MM/yyyy}">
                            <apex:param value="{!hr.Data__c}" />
                        </apex:outputText>
                    </apex:outputText>
                </span>
            </p>
        </td>
        <!-- Aqui termina a quarta coluna -->
    </tr>
    <apex:variable var="cont" value="{!cont + 1}" /> <!-- Incrementa o contador -->
</apex:repeat>



                        </table>
                        
                <table class="ass" style="margin: auto; margin:150px 10px 10px 10px;">
                    <tr style="margin-top:150px;  ">
                      


                        <td style=" text-align:center; width: 250px; text-align: center;" colspan="2">
                            <div style="padding:0; margin:0; text-align:center;">
                                <div style="padding:0; margin: 0 0 -3px 0; text-align:center;">
                                    <apex:image style="padding:0; margin:0 auto -15px ; text-align:center;"
                                        value="{! IF(L_M_D__c.Elaborador__r.Contact.assinatura__c != "", L_M_D__c.Elaborador__r.Contact.assinatura__c, "https://hospcom--c.na170.content.force.com/servlet/servlet.ImageServer?id=0156e00000Bf8Ui&oid=00Di0000000JVhH&lastMod=1667927109000")}"
                                        width="200" height="60px" />
                                </div>

                                <div style="padding:0; margin:0;">
                                    <p style="padding:0; margin:0 auto;">
                                    <div class="underline"
                                        style="padding:0; margin:0 auto; width: 70%;border-bottom: 1px solid #0c3557;">
                                    </div><br />
                                    {!L_M_D__c.Elaborador__r.name}<br /> Elaborador

                                    </p>
                                </div>
                            </div>
                        </td>
                        
                          <td style=" text-align:center; width: 250px; text-align: center;" colspan="2">
                            <div style="padding:0; margin:0; text-align:center;">
                                <div style="padding:0; margin: 0 0 -3px 0; text-align:center;">
                                    <apex:image style="padding:0; margin:0 auto -15px ; text-align:center;" value="{! IF(L_M_D__c.Revisor__r.Contact.assinatura__c != "", L_M_D__c.Revisor__r.Contact.assinatura__c, "https://hospcom--c.na170.content.force.com/servlet/servlet.ImageServer?id=0156e00000Bf8Ui&oid=00Di0000000JVhH&lastMod=1667927109000" ) }" width="250" height="60px" />
                                </div>

                                <div style="padding:0; margin:0;">
                                    <p style="padding:0; margin:0 auto;">
                                    <div class="underline"
                                        style="padding:0; margin:0 auto; width: 70%;border-bottom: 1px solid #0c3557;">
                                    </div><br />
                                    {!L_M_D__c.Revisor__r.Name}<br /> Revisor

                                    </p>
                                </div>
                            </div>
                        </td>
                        
                         <td style=" text-align:center; width: 250px; text-align: center;" colspan="2">
                            <div style="padding:0; margin:0; text-align:center;">
                                <div style="padding:0; margin: 0 0 -3px 0; text-align:center;">
                                    <apex:image style="padding:0; margin:0 auto -15px ; text-align:center;"
                                        value="https://hospcom.file.force.com/servlet/servlet.ImageServer?id=0156e00000BgFbi&oid=00Di0000000JVhH&lastMod=1672836269000"
                                        width="200" height="60px" />
                                </div>

                                <div style="padding:0; margin:0;">
                                    <p style="padding:0; margin:0 auto;">
                                    <div class="underline"
                                        style="padding:0; margin:0 auto; width: 70%;border-bottom: 1px solid #0c3557;">
                                    </div><br />
                                    {!L_M_D__c.Aprovado_por__r.Name}<br /> Aprovador

                                    </p>
                                </div>
                            </div>
                        </td>

                    </tr>
                </table>
                        <table style=" margin:50px 0 0; border:1px solid #000; width:650px; border-collapse: collapse; " class="footer2">
                            <tr  style="border:1px solid #000;" >
                                  <td style="border:1px solid #0c3557; padding:1px 5px; " ><span>Elaborador</span></td>
                                  <td style="border:1px solid #0c3557; padding:1px 5px; " >{!L_M_D__c.Elaborador__r.name}</td>
                                  <td style="border:1px solid #0c3557; display: flex; align-items: center; justify-content: space-evenly; width:150px; padding:1px 5px; font-weight:500;" rowspan="3"> <span style=" font-weight:900;" >Data de aprovação</span>   <apex:outputText > <apex:outputText value="{0,date,dd/MM/yyyy}"><apex:param value="{! L_M_D__c.Data_de_aprova_o__c }" /></apex:outputText></apex:outputText>  </td>
                            </tr>
                            
                             <tr style="border:1px solid #0c3557;" >
                                  <td style="border:1px solid #0c3557; padding:1px 5px; " ><span>Revisor</span></td> <td style="border:1px solid #0c3557; width:400px; padding:1px 5px; font-weight:500; " >{!L_M_D__c.Revisor__r.name }</td>
                            </tr>
                            
                            <tr style="border:1px solid #0c3557;" >  
                                 <td style="border:1px solid #0c3557; padding:1px 5px; " ><span>Aprovador</span></td> <td style="border:1px solid #0c3557; padding:1px 5px; width:100px; font-weight:500;" >{!L_M_D__c.Aprovado_por__r.name}</td>
                            </tr>
                        </table>
                        
                    </apex:pageBlock>
                    
                    <apex:pageBlock >
                        <table style=" padding:20px 0 100px;">
                            <tr>
                                <td>
                                    <p>
                                        DIREITOS DE REPRODUÇÃO
                                    </p>
        
                                    <p>
                                        Os direitos de reprodução deste documento pertencem à
                                        {!L_M_D__c.Conta_Relacionada__r.Raz_o_Social__c}.
                                        É proibida a reprodução no todo ou em parte, sob qualquer motivo, sem a
                                        aprovação por escrito.
                                    </p>
                                </td>
                            </tr>
                        </table>
                        

                        <table class="content222">

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">1.Objetivo: </span>
                                        <br />
                                        <span class="resposta"> {!L_M_D__c.Objetivo__c} </span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">2.Aplicação: </span>
                                        <br />
                                        <span class="resposta"> {!L_M_D__c.Aplicao__c }</span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="sessao-questao">
                                    <p class=""> <span class="questao">
                                            3.Responsabilidade e Autoridade: </span> <span class="resposta">
                                            <apex:outputText >
                                                <apex:outputField value=" {!L_M_D__c.Responsabilidade_e_Autoridade__c }">
                                                </apex:outputField>
                                            </apex:outputText>
                                        </span></p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">4.Definições </span>
                                        <br />
                                        <span class="resposta">{!L_M_D__c.Defini_es__c}</span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">5.Equipamentos e Softwares</span>
                                        <br />
                                        <span class="resposta">{!L_M_D__c.Equipamentos_e_Softwares__c}</span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">6.Condições Gerais: </span>
                                        <br />
                                        <span class="resposta">{!L_M_D__c.Condi_es_Gerais__c}</span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">7.Formulários, Anexos e Documentos: </span>
                                        <br />
                                        <span class="resposta">{!L_M_D__c.Formul_rios_Anexos_e_Documentos__c}</span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">8.Referência </span>
                                        <br />
                                        <span class="resposta"> {!L_M_D__c.Refer_ncia__c}</span>
                                    </p>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="4" class="questão  sessao-questao">
                                    <p class="">
                                        <span class="questao">9.Registros:</span>
                                        <br />
                                        <span class="resposta">{!L_M_D__c.Registros__c}</span>
                                    </p>
                                </td>
                            </tr>
                            <!--hr/-->
                            <!--
                            ********************
                                ASSINATURAS
                            ********************
                            -->
                        </table>

        </apex:pageBlock>
        </body> 
    <apex:pageBlock >
        <div class="container_ass">
             
            </div>
    </apex:pageBlock>
</apex:page>