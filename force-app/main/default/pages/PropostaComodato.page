<apex:page renderAs="pdf" standardController="Demonstracao__c" standardStylesheets="false" cache="false" showHeader="false" sidebar="false" applyHtmlTag="true" applyBodyTag="false">
    <head>
        <style type="text/css" media="print">
            
            /* pdf */
            @page:first{
                size:A4;
                background: url({!$Resource.SobreHospcom});
                margin:150px 50px 120px 50px;
                @bottom-center{content:element(paginacao);}
            }
            @page{
                size:A4;
                background: url({!$Resource.TimbradoHospcom});
                margin:150px 50px 120px 50px;
                @bottom-center{content:element(paginacao);}
            }
            .pagina:before{content:counter(page);}
            .paginas:before{content:counter(pages);}
            
            /* paginação */
            .paginacao{
                height:120px;
                position:running(paginacao);
            }.paginacao .valor{
                position: absolute;
                top: 74px;
                left: 410px;
                text-align:center;
                background-color:white;
                font-family:arial, verdana, sans-serif;
                font-size:12px;
                font-weight:600;
                color:#697f9b;
            }
            
            /* documento */
            .documento{
                padding:0px;
                margin:0px;
                font-family:arial, verdana, sans-serif;
            }.bloco{
                <!--page-break-inside:avoid;-->
            }.linha{
                white-space: nowrap;
            }
            
            /* capa */
            .capa .titulo{
                margin-top:505px;
                width:100%;
                text-align:center;
                text-transform:uppercase;
                font-weight:bold;
                font-size:20px;
                white-space:pre;
            }.capa .numero{
                margin-top:40px;
                width:100%;
                text-align:right;
                font-size:14px;
            }.capa .rotulo{
                margin-top:35px;
                font-size:15px;
            }.capa .valor{
                margin-top:5px;
                margin-left:20px;
                font-size:17px;
                font-weight:bold;
            }.capa .nota{
                margin-top:5px;
                margin-left:20px;
                font-size:14px;
            }
            
            /* conteudo */
            .conteudo{
                page-break-before:always;
            }.conteudo .titulo{
                font-size:14px;
                font-weight:bold;
                line-height:120%;
            }.conteudo .paragrafo{
                font-size:13px;
                text-align:justify;
                line-height:120%;
                text-justify:inter-word;
            }.conteudo .obsimgs{
                text-align:right;
                font-size:11px;
                font-weight:bold;
                font-style:italic;
            }.conteudo .assinatura{
                width:100%;
            }.conteudo .assinatura td{
                width:50%;
                font-size:13px;
                line-height:130%;
                vertical-align:top;
            }.conteudo .nota{
                font-size:13px;
                text-align:justify;
                line-height:120%;
                font-style:italic;
            }
            
            /* listagem */
            .listagem{ 
                width:100%;
            }.listagem table{ 
                width:100%;
                border-collapse:collapse;
            }.listagem td{ 
                padding:2px 5px;
                line-height:120%;
            }.listagem .pre-cabecalho{
                height:10px;
            }.listagem .cabecalho td{
                font-size:12px;
                font-weight:bold;
                background-color:#e2e3e3;
                white-space: nowrap;
                border-color: black;
                border-style:solid;
                border-width:1px 0px 1px 0px;
            }.listagem .item-dados .imagem{
                vertical-align:middle;
            }.listagem .item-dados.acessorio .imagem{
                text-align:right;
            }.listagem .item-dados.equipamento img{
                width: 70px;
                height: 80px; 
            }.listagem .item-dados.acessorio img{
                width: 55px;
                height: 55px; 
            }.listagem .item-dados .valor{
                border-color: black;
                border-style:solid;
                border-width:0px 0px 0px 0px;
            }.listagem .item-dados td{
                font-size:10px;
                vertical-align:top;
            }.listagem .item-descr td{
                font-size:10px;
                <!--text-align:justify; -->
                vertical-align:top;
                <!-- text-justify:inter-word;-->
                border-color:#eef2f4;
                border-style:solid;
                border-width:0px 0px 0px 0px;
            }.listagem .subtotal{
                font-weight: bold;
                font-size:10px;
                white-space: nowrap;
            }.listagem .subtotal .valor{
            
                font-size:10px;
                width:45px;
                border-color:#eef2f4;
                border-style:solid;
                border-width:0px 0px 0px 0px;
                white-space: nowrap;

            }
        </style>
    </head>
    <apex:outputText rendered="{!IF(Demonstracao__c.Quantidade_proposta__c > 0, true, false)}">
    <body class="documento">
        
        <!-- paginacao -->
        <div class="paginacao">
            <div class="valor">Página <span class="pagina"/> de <span class="paginas"/></div>
        </div>
        
        <!-- capa -->
        <div class="capa">
            <div class="titulo">PROPOSTA DE COMODATO</div>
            <div class="numero">Nº: {!Demonstracao__c.Name}</div>
            <apex:outputText rendered="{!IF(Demonstracao__c.Conta__r.RecordType.Name=='Conta comercial',true,false)}">
                <div class="rotulo" style="margin-top:20px;">À</div>
                <div class="valor">{!Demonstracao__c.Conta__r.Name}</div>
                <div class="nota">CNPJ: {!Demonstracao__c.Conta__r.CNPJ__c}</div>            
            </apex:outputText>
                <div class="rotulo">Aos cuidados de</div>
                <div class="valor">{!Demonstracao__c.Contato__r.Name}</div>
                <apex:outputText rendered="{!IF(Demonstracao__c.Contato__r.CPF__c!=null,true,false)}">
                    <div class="nota">CPF: {!Demonstracao__c.Contato__r.CPF__c}</div>          
                </apex:outputText>
        </div>
        
        <!-- conteudo -->
        <div class="conteudo">
            
            <div class="bloco">
                <apex:variable var="n1" value="{!0}"/><apex:variable var="n2" value="{!0}"/><apex:variable var="n3" value="{!0}"/>
                <div class="titulo">Prezados Senhores,</div>
                <br/>
                <div class="paragrafo">A <b>{!Demonstracao__c.Fornecedor__r.Raz_o_Social__c}</b>, inscrita no CNPJ sob Nº {!Demonstracao__c.Fornecedor__r.CNPJ__c}, sediada na {!Demonstracao__c.Fornecedor__r.BillingStreet}, {!Demonstracao__c.Fornecedor__r.BillingCity} - {!Demonstracao__c.Fornecedor__r.BillingState} , CEP {!Demonstracao__c.Fornecedor__r.BillingPostalCode}, tem a satisfação de transmitir-lhes a seguinte proposta de comodato, conforme condições abaixo delineadas.</div>
                <br/>
            </div>
            
            <div class="bloco">
                <div class="titulo">1. Objeto da proposta</div>
                <br/>
                
                <div class="paragrafo">Constitui objeto da presente proposta a cessão em comodato do(s) equipamento(s) médico-hospitalar(es), descrito(s) em detalhes no item 2.1 (“Produtos(s)”), que são de propriedade da Hospcom. Os serviços de instalação e assistência técnica serão prestados pela Hospcom ou por outra empresa por ela designada, conforme condições explicitadas na presente proposta e em seus anexos. A definição do estabelecimento vendedor, matriz ou filial da Hospcom, será indicada na nota de remessa de comodato.</div>
                
                <br/>
            </div>
            
            <div class="bloco">
                <div class="titulo">2. Condições gerais do comodato</div>
                <br/>
                
                <div class="paragrafo"><b>2.1</b> O objeto da presente proposta é a cessão do(s) seguinte(s) Equipamento(s)</div>
                <br/>
            </div>
            
            <!-- COMEÇA PDF AQUI -->
            <div class="listagem">
                
                
                <apex:variable var="subtotal" value="{!0}"/>
                
                <table cellpadding="0px" cellspacing="0px" style="border: 1px solid black">
                    <apex:repeat value="{!Demonstracao__c.Produtos_da_proposta_do_comodato__r}" var="produto">

                        
                        <tbody class='bloco'>

                            <!-- cabeçalho -->
                            
                                <tr class="pre-cabecalho"><tr cellspacing="7"></tr></tr>
                                <tr class="cabecalho">
                                    <td></td>
                                    <td>Imagem</td>
                                    <td>Produto</td>
                                    <td>Modelo</td>
                                    <td>Fabricante</td>
                                    <td>Qtd.</td>
                                </tr>
                            
                            <!-- ITEM -->
                            <tr class="item-dados equipamento">
                                <td rowspan="2"></td>
                                <td rowspan="2" class="imagem"><img src="{!produto.Produto__r.URL_da_Imagem__c}"/></td>
                                <td class="valor">
                                    COD: {!produto.Produto__r.ProductCode}
                                    <br/>
                                    {!produto.Produto__r.Name}
                                    <apex:outputText rendered="{!IF(produto.Descricao__c != '', true, false)}"><br/> DESCRIÇÃO: {!produto.Descricao__c}</apex:outputText>

                                </td>
                                <td class="valor">{!produto.Produto__r.Modelo__c}</td>
                                <td class="valor">{!produto.Produto__r.Marca__c}</td>
                                
                                <td class="valor">
                                    <apex:outputField value="{!produto.Quantidade__c}"/>
                                </td>
                                

                            </tr>
                            
                        </tbody>                      
                    </apex:repeat>
                </table>             
            </div>
            
            <br/>       
                        
            <div class="paragrafo"><b>2.2.</b> Como requisito para a perfeita e plena fruição dos equipamentos em comodato, fica registrado o necessário consumo mensal dos consumíveis abaixo descritos, que deverão ser solicitados pela <b>COMODATÁRIA</b> após a assinatura do contrato de comodato, através de pedido de compra encaminhado à <b>COMODANTE</b> de forma antecipada ao departamento comercial da <b>COMODANTE</b>:</div>
            <br/>
            <div class="paragrafo"><b>2.3.</b> O período compreendido pelo comodato será do dia&nbsp;<apex:outputField value="{!Demonstracao__c.Data_prevista__c}"/> ao dia&nbsp;<apex:outputField value="{!Demonstracao__c.Data_Final__c}"/>.</div><br/>

<apex:outputText rendered="{!IF(Demonstracao__c.Valor_requerido_de_venda_mensal2__c > 0, true, false)}">
            <div class="listagem">
                
                
                <apex:variable var="subtotal" value="{!0}"/>
                
                <table cellpadding="0px" cellspacing="0px" style="border: 1px solid black">
                    

                        
                        <tbody class='bloco'>

                            <!-- cabeçalho -->
                            
                                <tr class="pre-cabecalho"><tr cellspacing="6"></tr></tr>
                                <tr class="cabecalho">
                                    <td>Imagem</td>
                                    <td>Produto</td>
                                    <td>Modelo</td>
                                    <td>Fabricante</td>
                                    <td>Valor Unit.</td>
                                    <td>Qtd Mensal</td>
                                    <td>Qtd Total</td>
                                    <td>Valor Mensal</td>
                                    <td>Valor Total</td>
                                </tr>
                            <apex:repeat value="{!Demonstracao__c.Consumiveis_de_comodato__r}" var="produto">
                            <!-- ITEM -->
                                <tr class="item-dados equipamento">
                                    <td  class="imagem"><img src="{!produto.Produto__r.URL_da_Imagem__c}"/></td>
                                    <td class="valor" style="font-size:9px;">
                                        COD: {!produto.Produto__r.ProductCode}
                                        <br/>
                                        {!produto.Produto__r.Name}
                                    </td>
                                    <td class="valor" style="font-size:9px; width:10px;">{!produto.Produto__r.Modelo__c}</td>
                                    <td class="valor" style="font-size:9px; width:10px;">{!produto.Produto__r.Marca__c}</td>
                                    
                                    <td class="valor" style="font-size:9px; width:10px;">
                                        <apex:outputField value="{!produto.Valor_unitario__c}"/>
                                    </td>
                                    
                                    <td class="valor" style="font-size:9px;">
                                        <apex:outputField value="{!produto.Quantidade__c}"/>
                                    </td>
                                    <td class="valor" style="font-size:9px;">
                                        <apex:outputField value="{!produto.Qtd_total_do_contrato__c}"/>
                                    </td>
                                    <td class="valor" style="font-size:9px;">
                                        <apex:outputField value="{!produto.Valor_total__c}"/>
                                    </td>
                                    
                                    <td class="valor" style="font-size:9px;width:60;">
                                        <apex:outputField value="{!produto.Valor_total_do_contrato__c}"/>
                                    </td>  
                                </tr>
                            </apex:repeat>
                        </tbody>                      
                    
                </table>
                </div>
                </apex:outputText>
                <br/>
                <br/>
                
                <div class="titulo">3. Validade da proposta</div><br/>
                
                <div class="paragrafo"><b>3.1.</b> A proposta deverá ser assinada e devolvida à Hospcom dentro do prazo de validade abaixo descrito. Após o término do prazo a Hospcom não garante a manutenção da proposta descrita bem como a disponibilidade do material e do serviço na forma descrita nesse documento.</div>
                <br/>
                <br/>
                <apex:outputText rendered="{!IF(Demonstracao__c.Observacoes__c = '', false, true)}">
                <div class="titulo">4. Observações gerais da proposta</div><br/>
                <div class="paragrafo"><apex:outputText value="{!Demonstracao__c.Observacoes__c}"/></div>
                <br/>
                <br/> 
                </apex:outputText>                              
                <div class="paragrafo"><b>Prazo de validade: <apex:outputField value="{!Demonstracao__c.Prazo_de_validade_da_proposta__c}"/></b></div>
                <br/>               
                <br/>               
                <div class="bloco">
                    <div class="titulo">Documento criado por </div>
                    <div class="paragrafo">
                        <b>{!Demonstracao__c.Owner.Name}</b>
                            ({!Demonstracao__c.Owner.Title})
                    </div>
                        <div class="paragrafo">Email:&nbsp;{!Demonstracao__c.Owner.Email}</div>
                        <div class="paragrafo">Telefone:&nbsp;{!Demonstracao__c.Owner.Phone}</div>
                    <br/>
                </div>
            
            <div class="bloco">

                
                    <table class="assinatura">
                        <tr>
                            <td>
                                <br/><br/>____________________________________
                                <br/>Nome: 
                                <br/>CPF: 
                                <br/>RG:
                            </td>
                            <td>
                                <br/><br/>____________________________________
                                <br/>Nome:
                                <br/>CPF:
                                <br/>Cargo: 
                                <br/>Data ass.: 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <br/><br/>____________________________________
                                <br/>Testemunha 1
                                <br/>Nome: 
                                <br/>CPF: 
                            </td>
                            <td>
                                <br/><br/>____________________________________
                                <br/>Testemunha 2
                                <br/>Nome: 
                                <br/>CPF: 
                            </td>
                        </tr>
                    </table>
                    <br/>
                            
        </div>
        </div>

        
    </body>
    </apex:outputText>
    <apex:outputText rendered="{!IF(Demonstracao__c.Quantidade_proposta__c == 0, true, false)}">
    INSIRA PRODUTOS PARA GERAR A PROPOSTA
    </apex:outputText>

</apex:page>