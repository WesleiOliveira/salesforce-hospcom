@IsTest(seeAllData=true)
public class ClicksignListenerTest {

    @IsTest
    static void testDoPost() {
        // Define os dados da requisição
        String requestBody = '{"event":{"name":"sign","data":{"signer":{"sign_as":"approve","key":"a7e674a9-49e0-4ce3-b2ec-5f493562fa72","email":"hefoka2353@chotunai.com","name":"Gardin Monet Gonçalves","birthday":"1990-01-01","documentation":"238.193.469-37","has_documentation":true,"created_at":"2023-02-01T13:26:51.116-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"cdb38258-f21c-4b99-9635-e11e3f1c51dd","url":"https://sandbox.clicksign.com/sign/a9a56bc0-2c17-488b-b978-582ef78c23b1","address":"187.32.11.242","validation":{"status":"pending","name":"Gardin Monet Gonçalves"},"selfie_name":null,"selfie_hash":null,"handwritten_hash":null,"handwritten_name":null,"official_document_front_hash":null,"official_document_back_hash":null,"official_front_name":"frente 02 fev 2023, 11-43-23.png","official_back_name":"verso 02 fev 2023, 11-43-23.png"},"secret_hmac":null,"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"log_version":"1.441.0","url":"https://sandbox.clicksign.com"},"occurred_at":"2023-02-02T11:43:23.583-03:00"},"document":{"key":"b8adb682-b7c5-4542-9760-ca4a45f7a37b","account_key":"1732bc8e-50b2-4269-801e-9bee21c29f37","path":"/Contrato de compra e venda 00006833 02-02-2023 H: 11:41:19Z.pdf","filename":"Contrato de compra e venda 00006833 02-02-2023 H: 11:41:19Z.pdf","uploaded_at":"2023-02-02T14:41:21.644Z","updated_at":"2023-02-02T14:43:23.568Z","finished_at":null,"deadline_at":"2023-03-04T11:41:21.392-03:00","status":"running","auto_close":true,"locale":"pt-BR","metadata":{},"sequence_enabled":true,"signable_group":4,"remind_interval":null,"block_after_refusal":true,"downloads":{"original_file_url":"https://clicksign-sandbox-content.s3.amazonaws.com/2023/02/02/14/41/21/03e715ab-8fff-4f01-b4d8-ad2e6d139b81/Contrato%20de%20compra%20e%20venda%2000006833%2002-02-2023%20H%3A%2011%3A41%3A19Z.pdf?X-Amz-Expires=301\u0026X-Amz-Date=20230202T144322Z\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEFsaCXVzLWVhc3QtMSJGMEQCIB5FNKdAXUnv9ReVms4gXMctNPYAx6yabLVqxsYywlpCAiB%2FxfDFAoaMmx7oxlLeJEW7fhbF%2FjtuXNqdJk3%2FuAi6ZSrVBAjT%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAIaDDc0MDY2MjI3ODc5MyIMz%2B%2Bg1X9LG9jtc8pUKqkE37SEONfgKAVqxdFPRf0mSrkKrlBh%2BclQWvwTSVNKL6i8PwYWg%2FuXc7RqcOQzLf1NdRNb5sBNvUVVmQR91TVvZ8195Q%2Fs30cvSEHEs1H%2BUo24HLLHlxA3QwzzUa%2FKYS9jGnV5EaiGwhxwjI0JYDSXWJhUvJVE59ziECDIlGtyUu%2B%2FOqAO8jUPF%2FsPzXXLc1tEyfMtsa%2FdQx46j20wcSLKEZ6P%2BEEJ2%2ByO0Eca2DYRZ9zgR1sfS%2FAc8Hbiop%2Fi%2FIiaxj8nO5VBa6aVGgRXTUeUauS15P0ni8WKcnf6Nmws3CYSqabIMHiwik15PN%2FrwK5VMTKJI9Oubma48Ouf3PU0F77WPIkrkGfFJSG6CFgTDsTHsuDzfV80CMcqn1cOY4CLADjL1oDAHJKIEPAp%2FDYsmxlhGpWrWq9%2FhcgIJ369H3JoPWqh0PArU0fToT%2BgoN02klyN32AQVDN1ahJTfN%2FweO57Wveouygh2g4b5pFBAxaszTVXqRpxtqr0yFV6z8mPCuVkCiDXHodde2JSQMhKTJTP3mAPq%2FfBIYCW9CBq%2BSEzj5btOs9TGVwp3AQYrQNoLcCR0PdKifjPWBE%2FZqUyB6RvoFJgXo1kX%2FypMjOWNsyLImKIpQmwGqK6jGpJKn6KDMMp7W1Tr1NCLGTISHuTpxl4usuU01QM3X7dv7FFT7569r4LUXgVQogcCruwPKdH9Yj6K%2FxAywZhjtX5jB0iaFGb%2BKl7pbZ%2B1TCMnO6eBjqqAdA1rOofFabqJR7ykdR7wKB9jpXDLYzm35331VegMfNTQx4okgahQoJeTtGU2piy8b9Ey7cl8hkGVScXVRW1UzqELj1TifBV9YOXO6YQxLZkqLGIuLM7VqDEH82UKYkIaQjuwTFmjtY%2FXS%2FPWRmDT%2BEa3Qtxl%2BfdBKH9Er61SnIT%2FeWCLND5i8xxKs3w6IeshjVxyDxixICZZLDmi9LNZmqMARto47vRK5iD\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA2Y4XJPKEZADGKZYL%2F20230202%2Fus-east-1%2Fs3%2Faws4_request\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Signature=69194476385cbf97d314e13707c527bdd1db8a61ae08615a4c22978d1af5fcba"},"template":null,"signers":[{"list_key":"2e26eb3d-b54c-4bee-99f2-e74abc2c100e","key":"3172d9fc-a9a0-471e-af50-ac2d393b74b4","request_signature_key":"fdda0b70-8170-4a93-adec-75539aaf6f3c","email":"gagadi8364@bymercy.com","name":"Carolina Milena Drumond","has_documentation":true,"documentation":"811.827.239-77","birthday":null,"phone_number":null,"sign_as":"witness","delivery":"email","group":1,"refusable":true,"url":"https://sandbox.clicksign.com/sign/fdda0b70-8170-4a93-adec-75539aaf6f3c","auths":["email"],"created_at":"2023-02-01T16:54:55.311Z","signature":{"name":"Carolina Milena Drumond","email":"gagadi8364@bymercy.com","birthday":"1999-01-01","documentation":"811.827.239-77","validation":{"status":"cpf_not_found","documentation":"811.827.239-77"},"ip_address":"187.32.11.242","signed_at":"2023-02-02T14:42:30.196Z","sign_as":"witness"}},{"list_key":"cdb38258-f21c-4b99-9635-e11e3f1c51dd","key":"a7e674a9-49e0-4ce3-b2ec-5f493562fa72","request_signature_key":"a9a56bc0-2c17-488b-b978-582ef78c23b1","email":"hefoka2353@chotunai.com","name":"Gardin Monet Gonçalves","has_documentation":true,"documentation":"238.193.469-37","birthday":"1990-01-01","phone_number":null,"sign_as":"approve","delivery":"email","group":2,"refusable":true,"url":"https://sandbox.clicksign.com/sign/a9a56bc0-2c17-488b-b978-582ef78c23b1","auths":["email"],"created_at":"2023-02-01T16:26:51.116Z","signature":{"name":"Gardin Monet Gonçalves","email":"hefoka2353@chotunai.com","birthday":"1990-01-01","documentation":"238.193.469-37","validation":{"status":"pending","name":"Gardin Monet Gonçalves"},"ip_address":"187.32.11.242","signed_at":"2023-02-02T14:43:23.477Z","sign_as":"approve"}}],"events":[{"name":"sign","data":{"signer":{"sign_as":"approve","key":"a7e674a9-49e0-4ce3-b2ec-5f493562fa72","email":"hefoka2353@chotunai.com","name":"Gardin Monet Gonçalves","birthday":"1990-01-01","documentation":"238.193.469-37","has_documentation":true,"created_at":"2023-02-01T13:26:51.116-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"cdb38258-f21c-4b99-9635-e11e3f1c51dd","url":"https://sandbox.clicksign.com/sign/a9a56bc0-2c17-488b-b978-582ef78c23b1","address":"187.32.11.242","validation":{"status":"pending","name":"Gardin Monet Gonçalves"},"selfie_name":null,"selfie_hash":null,"handwritten_hash":null,"handwritten_name":null,"official_document_front_hash":null,"official_document_back_hash":null,"official_front_name":"frente 02 fev 2023, 11-43-23.png","official_back_name":"verso 02 fev 2023, 11-43-23.png"},"secret_hmac":null,"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"log_version":"1.441.0","url":"https://sandbox.clicksign.com"},"occurred_at":"2023-02-02T14:43:23.583Z"},{"name":"sign","data":{"signer":{"sign_as":"witness","key":"3172d9fc-a9a0-471e-af50-ac2d393b74b4","email":"gagadi8364@bymercy.com","name":"Carolina Milena Drumond","birthday":"1999-01-01","documentation":"811.827.239-77","has_documentation":true,"created_at":"2023-02-01T13:54:55.311-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"2e26eb3d-b54c-4bee-99f2-e74abc2c100e","url":"https://sandbox.clicksign.com/sign/fdda0b70-8170-4a93-adec-75539aaf6f3c","address":"187.32.11.242","validation":{"status":"pending","name":"Carolina Milena Drumond"},"selfie_name":null,"selfie_hash":null,"handwritten_hash":null,"handwritten_name":null,"official_document_front_hash":null,"official_document_back_hash":null,"official_front_name":"frente 02 fev 2023, 11-42-30.png","official_back_name":"verso 02 fev 2023, 11-42-30.png"},"secret_hmac":null,"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"log_version":"1.441.0","url":"https://sandbox.clicksign.com"},"occurred_at":"2023-02-02T14:42:30.350Z"},{"name":"remove_signer","data":{"user":{"email":"desenvolvimento@hospcom.net","name":"Desenvolvimento Hospcom"},"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"signers":[{"sign_as":"party","key":"f361c8a2-9e3b-4b57-9ade-14990723c434","email":"sareje4868@bymercy.com","name":"Mario Sergio","birthday":null,"documentation":"364.456.730-15","has_documentation":true,"created_at":"2023-02-02T11:41:21.873-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"07c53d22-3eec-405a-aeee-98c416f9607d","url":"https://sandbox.clicksign.com/sign/959a1f57-7d78-4227-8b65-79370efe21c5"}]},"occurred_at":"2023-02-02T14:41:46.089Z"},{"name":"add_signer","data":{"user":{"email":"desenvolvimento@hospcom.net","name":"Desenvolvimento Hospcom"},"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"signers":[{"sign_as":"approve","key":"a7e674a9-49e0-4ce3-b2ec-5f493562fa72","email":"hefoka2353@chotunai.com","name":"Gardin Monet Gonçalves","birthday":"1990-01-01","documentation":"238.193.469-37","has_documentation":true,"created_at":"2023-02-01T13:26:51.116-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"cdb38258-f21c-4b99-9635-e11e3f1c51dd","url":"https://sandbox.clicksign.com/sign/a7e674a9-49e0-4ce3-b2ec-5f493562fa72"}]},"occurred_at":"2023-02-02T14:41:22.458Z"},{"name":"add_signer","data":{"user":{"email":"desenvolvimento@hospcom.net","name":"Desenvolvimento Hospcom"},"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"signers":[{"sign_as":"witness","key":"3172d9fc-a9a0-471e-af50-ac2d393b74b4","email":"gagadi8364@bymercy.com","name":"Carolina Milena Drumond","birthday":null,"documentation":"811.827.239-77","has_documentation":true,"created_at":"2023-02-01T13:54:55.311-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"2e26eb3d-b54c-4bee-99f2-e74abc2c100e","url":"https://sandbox.clicksign.com/sign/3172d9fc-a9a0-471e-af50-ac2d393b74b4"}]},"occurred_at":"2023-02-02T14:41:22.295Z"},{"name":"add_signer","data":{"user":{"email":"desenvolvimento@hospcom.net","name":"Desenvolvimento Hospcom"},"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"signers":[{"sign_as":"party","key":"f361c8a2-9e3b-4b57-9ade-14990723c434","email":"sareje4868@bymercy.com","name":"Mario Sergio","birthday":null,"documentation":"364.456.730-15","has_documentation":true,"created_at":"2023-02-02T11:41:21.873-03:00","auths":["email"],"selfie_enabled":false,"handwritten_enabled":false,"official_document_enabled":false,"liveness_enabled":false,"facial_biometrics_enabled":false,"communicate_by":"email","list_key":"07c53d22-3eec-405a-aeee-98c416f9607d","url":"https://sandbox.clicksign.com/sign/f361c8a2-9e3b-4b57-9ade-14990723c434"}]},"occurred_at":"2023-02-02T14:41:22.126Z"},{"name":"upload","data":{"user":{"email":"desenvolvimento@hospcom.net","name":"Desenvolvimento Hospcom"},"account":{"key":"1732bc8e-50b2-4269-801e-9bee21c29f37"},"deadline_at":"2023-03-04T11:41:21.392-03:00","auto_close":true,"locale":"pt-BR"},"occurred_at":"2023-02-02T14:41:21.655Z"}],"attachments":[],"links":{"self":"/accounts/5720/folders/2178735/documents/d9dfd876-7eb2-4f24-b4f2-11939620f2b7"}}}';
        Blob requestBlob = Blob.valueOf(requestBody);

        // Configura o contexto da requisição
        RestRequest req = new RestRequest();
        req.requestBody = requestBlob;
        req.addHeader('Content-Type', 'application/json');
        RestContext.request = req;

        // Chama o método do controlador
        ClicksignListener.doPost();

        // Verifica a resposta
        RestResponse res = RestContext.response;
        //System.assertEquals(200, res.statusCode, 'Expected status code 200');
        //System.assertEquals('Success', res.responseBody.toString(), 'Expected response body "Success"');
    }
}