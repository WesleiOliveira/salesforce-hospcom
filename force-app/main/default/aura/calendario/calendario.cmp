<aura:component controller="compromissoController" extends="c.ApexHelper" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global" >
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="SearchString" type="String" default="{!searchString}" access="global"/>

    <ltng:require
                  styles="{!join(',',
                          $Resource.fullCalendarV3 + '/fullcalendar.min.css',
                          $Resource.fontAwesome + '/css/font-awesome.min.css'
                          )}"     
                  
                  scripts="{!join(',',
                           $Resource.JQuery,
                           $Resource.fullCalendarV3  + '/moment.min.js',
                           $Resource.fullCalendarV3  + '/fullcalendar.min.js',
                           $Resource.fullCalendarV3  + '/pt-br.js'
                           )}"                    
                  afterScriptsLoaded="{!c.onRender}" />
    
    <div>
        <!-- SPINNER DE CARREGAMENTO -->
        <div id='spinnerDiv' style="display: none">
            <lightning:spinner id="spinner" alternativeText="Carregando" size="medium" />
        </div>
        
        <div class="divMestre">
            <div class="divCalendario">
                <div id="calendar"></div>
            </div>
            
            <div class="divMenu">
                <div class="tituloMenu">Calendário de compromissos</div>
                <div class="bodyMenu">
                    
                    <!-- <select id="selectCalendarios" class="selectCalendarios" multiple="enabled">
                        <option value="default" selected="selected" disabled="disabled">Selecione calendários para visualizar</option>
                        <option value="Sem conexão no momento do compromisso">Sem conexão no momento do compromisso</option>
                        <option value="Sem conexão no momento do compromisso">Sem conexão no momento do compromisso</option>
                        <option value="Sem conexão no momento do compromisso">Sem conexão no momento do compromisso</option>
                    </select> -->
                    
                    <form>
                        <div class="multiselect">
                            <div class="selectBox" id="selectBox">
                                <select class="selectMulti">
                                    <option>Selecione calendários para visualizar</option>
                                </select>
                                <div class="overSelect"></div>
                            </div>
                            <div id="checkboxes">
                                
                                
                            </div>
                        </div>
                    </form>
                    
                    
                    
                    <div class="divSmallCalendar">
                        <div id="smallCalendar"></div>
                    </div>
                    
                    <div class="divProximosCompromissos" id="divProximosCompromissos">
                        <div class="tituloMenu" style="margin-top: 10px; justify-content: flex-start;border-bottom: 0px solid">Futuros</div>
                        
                        <!-- BLOCO COMPROMISSO 
                        <div class="divMestreCompromisso">
                            <div class="divAuxiliarData">
                                21<br></br>MAI
                            </div>
                            <div class="divDadosCompromisso">
                                <div class="dataCompromisso">Hoje, 10:30</div>
                                <div class="tipoCompromisso">Visita</div>
                                <div class="relativoCompromisso">Sociedade Benef Israelita</div>
                                <div class="locationCompromisso">Goiânia-GO</div>
                            </div>
                        </div>
                         FIM BLOCO COMPROMISSO -->
                        
                        
                    </div>
                </div>
                
                <div class="divNewCompromisso" id="divNewCompromisso">+</div>
            </div>
            
            
            <!-- POPUP DE CHECKOUT -->
            <div id="divPaiPopup" class="divPaiPopup" style="display: none;">
                
                <div class="divPopup">
                    
                    <div class="headerPopup">
                        <div class="topoHeaderPopup">
                            <a id='linkCompromisso' target="_blank" href="https://www.devmedia.com.br"><i class="fa fa-external-link buttonTopoPopup" id='externalLinkPopup' aria-hidden="true"></i></a>
                        	<i class="fa fa-times-circle buttonTopoPopup" id='closeButtonPopup' aria-hidden="true"></i>
                        </div>
                        <div class="meioHeaderPopup">
                            Hoje, 10:30
                        </div>
                    </div>
                    
                    <div class="bodyPopup">
                        <div class="tipoCompromissoBody">VISITA</div>
                        <div class='relativoCompromisso referenteCompromissoBody'>UNIMED GOIANIA COOPERATIVA DE TRABALHO MEDICO</div>
                        <div class='locationCompromisso localizacaoCompromissoBody' id='locationCompromisso'>
                            <!-- <a href='https://www.google.com/maps?q="+latitude+","+longitude+"' target='_blank'>Goiânia, Goiás</a> -->
                        </div>
                        <div class='descricaoCompromissoPopup'></div>
                        <div class='divLocalizacoesPopup'>
                            <div class='mapaLocalizacaoCompromisso'>
                                
                            </div>
                        </div>
                        
                        
                        <button class='checkOutButton'>Check-out</button>
                    </div>
                    
                    
                </div>
            </div>
            <!-- FIM POPUP CHECKOUT -->
            
            
            <!-- POPUP DE CONFIRMACAO CHECKOUT -->
            <div id="divPaiPopupCheckout" class="divPaiPopup" style="display: none">
                
                <div class="divPopup">
                    
                    <div class="headerPopup">
                        <div class="topoHeaderPopup" style="justify-content: flex-end!important">
                            <i class="fa fa-times-circle buttonTopoPopup" id='closeButtonPopupCheckout' aria-hidden="true"></i>
                        </div>
                        <div class="meioHeaderPopup">
                            CONFIRMAÇÃO DO CHECKOUT
                        </div>
                    </div>
                    
                    <div class="bodyPopup" style="row-gap: 20px">
                        
                        <select id="justificativa" class="justificativaInputCheckout">
                            <option value="default" selected="selected" disabled="disabled">Selecione uma justificativa</option>
                            <option value="Sem conexão no momento do compromisso">Sem conexão no momento do compromisso</option>
                            <option value="Endereço da conta errado">Endereço da conta errado</option>
                            <option value="Localização atual errada">Localização atual errada</option>
                        </select>
                        
                        <select id="contatoTratado" class="contatoTratadoInput">
                            <option value="default" selected="selected" disabled="disabled">Selecione o contato atendido</option>
                        </select>
                        
                        <textarea 
                               placeholder="Digite aqui o feedback da visita"
                               type="text"
                               maxlength="250"
                               id="feedbackCompromisso" 
                               class="feedbackCompromissoInput"
                                  />

                        <!--    
                        <input
                               class="inputCamera"
                               id="cameraFileInput"
                               type="file"
                               accept="image/*"
                               capture="environment"
                               />
						-->
                        
                        <lightning:fileUpload label="Envie uma foto do checkout"
                                              name="fileUploader"
                                              multiple="true"
                                              accept="{!v.filetype}"
                                              recordId="{!v.recordId}"
                                              disabled="{!v.disabled}"
                                              required="true"
                                              />
                        
                        <lightning:button label="Confirmar"
                              class="confirmaCheckout"
                              onclick="{! c.saveCheckout }"/>
                                                
                        
                    </div>
                    
                    
                </div>
            </div>
            <!-- FIM POPUP DE CONFIRMACAO CHECKOUT -->
            
            
        </div>
    </div>
    
</aura:component>