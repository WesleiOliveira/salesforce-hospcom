<aura:component extends="c.ApexHelper" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global"> 
    <aura:attribute name="soql" type="String"/>
    <aura:attribute name="resultData" type="Object"/>
    <aura:attribute name="columns" type="List"/>
       <aura:attribute name="rows" type="List"/>
       <aura:if isTrue="{!v.rows.length > 0}"/>


    <lightning:card title="Consulta SOQL (via API externa)">
        <div class="slds-p-around_medium">
            <lightning:textarea label="Digite sua consulta SOQL SALESFORCE" placeholder="Ex: SELECT Id, Name FROM Account" value="{!v.soql}" />
            <lightning:button label="Executar Consulta" onclick="{!c.handleSearch}" class="slds-m-top_small"/>
            <aura:if isTrue="{!not(empty(v.rows))}">
    <p class="slds-m-top_medium"><strong>Total de registros: </strong> {!v.rows.length}</p>
</aura:if>

<aura:if isTrue="{!not(empty(v.rows))}">
    <div style="max-height: 400px; overflow: auto;">
        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-m-top_medium">
            <thead>
                <tr>
                    <aura:iteration items="{!v.columns}" var="col">
                        <th>{!col}</th>
                    </aura:iteration>
                </tr>
            </thead>
            <tbody>
                <aura:iteration items="{!v.rows}" var="row">
                    <tr>
                        <aura:iteration items="{!row}" var="cell">
                            <td>{!cell}</td>
                        </aura:iteration>
                    </tr>
                </aura:iteration>
            </tbody>
        </table>
    </div>
</aura:if>

        </div>
    </lightning:card>
</aura:component>